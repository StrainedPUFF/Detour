{"ast":null,"code":"/* global fabric */import React,{useState,useRef,useEffect}from\"react\";// import  fabric  from \"fabric\";\n// import \"fabric\"; // Import Fabric.js globally\nimport*as pdfjs from\"pdfjs-dist\";import{useSession}from\"./SessionContext\";// Import the session context hook\n// Set the worker source for pdf.js\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";pdfjs.GlobalWorkerOptions.workerSrc=\"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js\";const DocumentCanvas=()=>{const{sessionId,documentUrl}=useSession();// Access the sessionId from the context\nconst canvasRef=useRef(null);const[canvas,setCanvas]=useState(null);// Tracks the Fabric.js canvas instance\nconst socket=useRef(null);const[currentPage,setCurrentPage]=useState(1);// Tracks the current PDF page\nconst[totalPages,setTotalPages]=useState(0);// Tracks the total number of pages in the PDF\nconst reconnectAttemptsRef=useRef(0);// Tracks reconnect attempts\nconst reconnectInterval=5000;// Reconnection interval (milliseconds)\nconst maxReconnectAttempts=5;// Max number of retry attempts\nconst fabric=require('fabric').fabric;useEffect(()=>{console.log(\"Initializing the canvas...\");const canvasInstance=new fabric.Canvas(canvasRef.current,{width:800,height:600});setCanvas(canvasInstance);const renderPDFToCanvas=async pageNumber=>{if(documentUrl){try{const pdf=await pdfjs.getDocument(documentUrl).promise;// Load PDF\nsetTotalPages(pdf.numPages);// Set the total number of pages\nconst page=await pdf.getPage(pageNumber);// Load the specified page\nconst viewport=page.getViewport({scale:1.5});// Adjust scale as needed\nconst pdfCanvas=document.createElement(\"canvas\");pdfCanvas.width=viewport.width;pdfCanvas.height=viewport.height;const context=pdfCanvas.getContext(\"2d\");await page.render({canvasContext:context,viewport}).promise;// Convert PDF canvas to an image and set as background\nfabric.Image.fromURL(pdfCanvas.toDataURL(),oImg=>{canvasInstance.setBackgroundImage(oImg,canvasInstance.renderAll.bind(canvasInstance));console.log(`PDF page ${pageNumber} rendered as background image.`);});}catch(error){console.error(\"Error rendering PDF:\",error);}}else{console.warn(\"No document URL provided.\");}};renderPDFToCanvas(currentPage);const connectWebSocket=()=>{if(!sessionId){console.error(\"Session ID is undefined. Unable to initialize WebSocket.\");return;}const webSocketUrl=`ws://127.0.0.1:8080/ws/session/${sessionId}/`;console.log(\"Attempting WebSocket connection to:\",webSocketUrl);socket.current=new WebSocket(webSocketUrl);socket.current.onopen=()=>{console.log(\"WebSocket connection established successfully.\");reconnectAttemptsRef.current=0;// Reset reconnect attempts\n};socket.current.onmessage=event=>{const data=JSON.parse(event.data);if(data.type===\"draw\"){console.log(\"Received drawing data:\",data.payload);fabric.util.enlivenObjects([data.payload],objects=>{objects.forEach(obj=>{if(canvasInstance){canvasInstance.add(obj);}});});}};socket.current.onclose=()=>{console.warn(\"WebSocket connection closed.\");if(reconnectAttemptsRef.current<maxReconnectAttempts){reconnectAttemptsRef.current+=1;console.warn(`Reconnecting... (${reconnectAttemptsRef.current}/${maxReconnectAttempts})`);setTimeout(connectWebSocket,reconnectInterval);}else{console.error(\"Max reconnection attempts reached. Unable to reconnect.\");}};socket.current.onerror=error=>{console.error(\"WebSocket encountered an error:\",error.message);};};// Establish WebSocket connection\nconnectWebSocket();// Enable drawing mode\ncanvasInstance.isDrawingMode=true;// Handle drawing events\ncanvasInstance.on(\"path:created\",e=>{const path=e.path;emitObjectData(path);});// Emit data for WebSocket transmission\nconst emitObjectData=object=>{try{if(socket.current&&socket.current.readyState===WebSocket.OPEN){socket.current.send(JSON.stringify({type:\"draw\",payload:object.toJSON()}));console.log(\"Emitted object data:\",object);}}catch(error){console.error(\"Error emitting object data:\",error.message);}};// Cleanup on component unmount\nreturn()=>{console.log(\"Cleaning up canvas and WebSocket...\");if(canvasInstance){canvasInstance.dispose();}if(socket.current){socket.current.close();}};},[documentUrl,sessionId,currentPage]);// Reinitialize if documentUrl, sessionId, or currentPage changes\nconst goToNextPage=()=>{if(currentPage<totalPages){setCurrentPage(prevPage=>prevPage+1);}};const goToPreviousPage=()=>{if(currentPage>1){setCurrentPage(prevPage=>prevPage-1);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef}),!documentUrl&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"No document available to load. Please check the session data.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:goToPreviousPage,disabled:currentPage===1,children:\"Previous Page\"}),/*#__PURE__*/_jsx(\"button\",{onClick:goToNextPage,disabled:currentPage===totalPages||totalPages===0,children:\"Next Page\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Page \",currentPage,\" of \",totalPages]})]})]});};export default DocumentCanvas;","map":{"version":3,"names":["React","useState","useRef","useEffect","pdfjs","useSession","jsx","_jsx","jsxs","_jsxs","GlobalWorkerOptions","workerSrc","DocumentCanvas","sessionId","documentUrl","canvasRef","canvas","setCanvas","socket","currentPage","setCurrentPage","totalPages","setTotalPages","reconnectAttemptsRef","reconnectInterval","maxReconnectAttempts","fabric","require","console","log","canvasInstance","Canvas","current","width","height","renderPDFToCanvas","pageNumber","pdf","getDocument","promise","numPages","page","getPage","viewport","getViewport","scale","pdfCanvas","document","createElement","context","getContext","render","canvasContext","Image","fromURL","toDataURL","oImg","setBackgroundImage","renderAll","bind","error","warn","connectWebSocket","webSocketUrl","WebSocket","onopen","onmessage","event","data","JSON","parse","type","payload","util","enlivenObjects","objects","forEach","obj","add","onclose","setTimeout","onerror","message","isDrawingMode","on","e","path","emitObjectData","object","readyState","OPEN","send","stringify","toJSON","dispose","close","goToNextPage","prevPage","goToPreviousPage","children","ref","style","color","marginTop","onClick","disabled"],"sources":["C:/Users/wesle/OneDrive/Documents/VLCS/myProject/VirtualLCS/frontend/src/DocumentCanvas.jsx"],"sourcesContent":["/* global fabric */\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n// import  fabric  from \"fabric\";\r\n// import \"fabric\"; // Import Fabric.js globally\r\nimport * as pdfjs from \"pdfjs-dist\";\r\nimport { useSession } from \"./SessionContext\"; // Import the session context hook\r\n\r\n// Set the worker source for pdf.js\r\npdfjs.GlobalWorkerOptions.workerSrc =\r\n  \"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js\";\r\n\r\nconst DocumentCanvas = () => {\r\n  const { sessionId, documentUrl } = useSession(); // Access the sessionId from the context\r\n  const canvasRef = useRef(null);\r\n  const [canvas, setCanvas] = useState(null); // Tracks the Fabric.js canvas instance\r\n  const socket = useRef(null);\r\n  const [currentPage, setCurrentPage] = useState(1); // Tracks the current PDF page\r\n  const [totalPages, setTotalPages] = useState(0); // Tracks the total number of pages in the PDF\r\n  const reconnectAttemptsRef = useRef(0); // Tracks reconnect attempts\r\n  const reconnectInterval = 5000; // Reconnection interval (milliseconds)\r\n  const maxReconnectAttempts = 5; // Max number of retry attempts\r\n  const fabric = require('fabric').fabric;\r\n\r\n  useEffect(() => {\r\n    console.log(\"Initializing the canvas...\");\r\n    const canvasInstance = new fabric.Canvas(canvasRef.current, {\r\n      width: 800,\r\n      height: 600,\r\n    });\r\n    setCanvas(canvasInstance);\r\n\r\n    const renderPDFToCanvas = async (pageNumber) => {\r\n      if (documentUrl) {\r\n        try {\r\n          const pdf = await pdfjs.getDocument(documentUrl).promise; // Load PDF\r\n          setTotalPages(pdf.numPages); // Set the total number of pages\r\n\r\n          const page = await pdf.getPage(pageNumber); // Load the specified page\r\n          const viewport = page.getViewport({ scale: 1.5 }); // Adjust scale as needed\r\n\r\n          const pdfCanvas = document.createElement(\"canvas\");\r\n          pdfCanvas.width = viewport.width;\r\n          pdfCanvas.height = viewport.height;\r\n\r\n          const context = pdfCanvas.getContext(\"2d\");\r\n          await page.render({ canvasContext: context, viewport }).promise;\r\n\r\n          // Convert PDF canvas to an image and set as background\r\n          fabric.Image.fromURL(pdfCanvas.toDataURL(), (oImg) => {\r\n            canvasInstance.setBackgroundImage(\r\n              oImg,\r\n              canvasInstance.renderAll.bind(canvasInstance)\r\n            );\r\n            console.log(`PDF page ${pageNumber} rendered as background image.`);\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Error rendering PDF:\", error);\r\n        }\r\n      } else {\r\n        console.warn(\"No document URL provided.\");\r\n      }\r\n    };\r\n\r\n    renderPDFToCanvas(currentPage);\r\n\r\n    const connectWebSocket = () => {\r\n      if (!sessionId) {\r\n        console.error(\r\n          \"Session ID is undefined. Unable to initialize WebSocket.\"\r\n        );\r\n        return;\r\n      }\r\n\r\n      const webSocketUrl = `ws://127.0.0.1:8080/ws/session/${sessionId}/`;\r\n      console.log(\"Attempting WebSocket connection to:\", webSocketUrl);\r\n\r\n      socket.current = new WebSocket(webSocketUrl);\r\n\r\n      socket.current.onopen = () => {\r\n        console.log(\"WebSocket connection established successfully.\");\r\n        reconnectAttemptsRef.current = 0; // Reset reconnect attempts\r\n      };\r\n\r\n      socket.current.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        if (data.type === \"draw\") {\r\n          console.log(\"Received drawing data:\", data.payload);\r\n          fabric.util.enlivenObjects([data.payload], (objects) => {\r\n            objects.forEach((obj) => {\r\n              if (canvasInstance) {\r\n                canvasInstance.add(obj);\r\n              }\r\n            });\r\n          });\r\n        }\r\n      };\r\n\r\n      socket.current.onclose = () => {\r\n        console.warn(\"WebSocket connection closed.\");\r\n        if (reconnectAttemptsRef.current < maxReconnectAttempts) {\r\n          reconnectAttemptsRef.current += 1;\r\n          console.warn(\r\n            `Reconnecting... (${reconnectAttemptsRef.current}/${maxReconnectAttempts})`\r\n          );\r\n          setTimeout(connectWebSocket, reconnectInterval);\r\n        } else {\r\n          console.error(\r\n            \"Max reconnection attempts reached. Unable to reconnect.\"\r\n          );\r\n        }\r\n      };\r\n\r\n      socket.current.onerror = (error) => {\r\n        console.error(\"WebSocket encountered an error:\", error.message);\r\n      };\r\n    };\r\n\r\n    // Establish WebSocket connection\r\n    connectWebSocket();\r\n\r\n    // Enable drawing mode\r\n    canvasInstance.isDrawingMode = true;\r\n\r\n    // Handle drawing events\r\n    canvasInstance.on(\"path:created\", (e) => {\r\n      const path = e.path;\r\n      emitObjectData(path);\r\n    });\r\n\r\n    // Emit data for WebSocket transmission\r\n    const emitObjectData = (object) => {\r\n      try {\r\n        if (socket.current && socket.current.readyState === WebSocket.OPEN) {\r\n          socket.current.send(\r\n            JSON.stringify({\r\n              type: \"draw\",\r\n              payload: object.toJSON(),\r\n            })\r\n          );\r\n          console.log(\"Emitted object data:\", object);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error emitting object data:\", error.message);\r\n      }\r\n    };\r\n\r\n    // Cleanup on component unmount\r\n    return () => {\r\n      console.log(\"Cleaning up canvas and WebSocket...\");\r\n      if (canvasInstance) {\r\n        canvasInstance.dispose();\r\n      }\r\n      if (socket.current) {\r\n        socket.current.close();\r\n      }\r\n    };\r\n  }, [documentUrl, sessionId, currentPage]); // Reinitialize if documentUrl, sessionId, or currentPage changes\r\n\r\n  const goToNextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      setCurrentPage((prevPage) => prevPage + 1);\r\n    }\r\n  };\r\n\r\n  const goToPreviousPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage((prevPage) => prevPage - 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <canvas ref={canvasRef} />\r\n      {!documentUrl && (\r\n        <p style={{ color: \"red\" }}>\r\n          No document available to load. Please check the session data.\r\n        </p>\r\n      )}\r\n      <div style={{ marginTop: \"10px\" }}>\r\n        <button onClick={goToPreviousPage} disabled={currentPage === 1}>\r\n          Previous Page\r\n        </button>\r\n        <button\r\n          onClick={goToNextPage}\r\n          disabled={currentPage === totalPages || totalPages === 0}\r\n        >\r\n          Next Page\r\n        </button>\r\n        <p>\r\n          Page {currentPage} of {totalPages}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentCanvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}