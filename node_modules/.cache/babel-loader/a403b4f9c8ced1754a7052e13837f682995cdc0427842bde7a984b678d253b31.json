{"ast":null,"code":"import React,{useState,useEffect}from'react';import DocumentCanvas from'./DocumentCanvas';import AudioChat from'./AudioChat';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SessionPage=()=>{const{sessionId,documentUrl}=useSession();// Use context to get session data\nconst[uploadedDocument,setUploadedDocument]=useState(null);const[error,setError]=useState('');console.log('Session ID:',sessionId);const handleDocumentUpload=event=>{const file=event.target.files[0];if(!file){setError('No file selected.');return;}// Validate file type and size\nconst validTypes=['application/pdf','image/jpeg','image/png'];const maxSize=5*1024*1024;// 5 MB\nif(!validTypes.includes(file.type)){setError('Invalid file type. Please upload a PDF, JPEG, or PNG file.');return;}if(file.size>maxSize){setError('File size exceeds the 5MB limit. Please upload a smaller file.');return;}// Read file and set as uploaded document\nconst reader=new FileReader();reader.onload=e=>{setUploadedDocument(e.target.result);setError('');// Clear errors on successful upload\nconsole.log('Document uploaded:',e.target.result);};reader.readAsDataURL(file);};useEffect(()=>{console.log('SessionPage rendered with sessionId:',sessionId);console.log('Document URL:',documentUrl);},[sessionId,documentUrl]);if(!sessionId){return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"Error: Session ID is undefined. Unable to proceed.\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Session Page\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px',backgroundColor:'pink',color:'red'},children:error}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleDocumentUpload}),/*#__PURE__*/_jsx(DocumentCanvas,{documentUrl:uploadedDocument||documentUrl,sessionId:sessionId}),/*#__PURE__*/_jsx(AudioChat,{sessionId:sessionId})]});};export default SessionPage;","map":{"version":3,"names":["React","useState","useEffect","DocumentCanvas","AudioChat","jsx","_jsx","jsxs","_jsxs","SessionPage","sessionId","documentUrl","useSession","uploadedDocument","setUploadedDocument","error","setError","console","log","handleDocumentUpload","event","file","target","files","validTypes","maxSize","includes","type","size","reader","FileReader","onload","e","result","readAsDataURL","style","color","children","padding","backgroundColor","onChange"],"sources":["C:/Users/wesle/OneDrive/Documents/VLCS/myProject/VirtualLCS/frontend/src/SessionPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport DocumentCanvas from './DocumentCanvas';\r\nimport AudioChat from './AudioChat';\r\n\r\nconst SessionPage = () => {\r\n  const { sessionId, documentUrl } = useSession(); // Use context to get session data\r\n  const [uploadedDocument, setUploadedDocument] = useState(null);\r\n  const [error, setError] = useState('');\r\n  console.log('Session ID:', sessionId);\r\n\r\n  const handleDocumentUpload = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) {\r\n      setError('No file selected.');\r\n      return;\r\n    }\r\n\r\n    // Validate file type and size\r\n    const validTypes = ['application/pdf', 'image/jpeg', 'image/png'];\r\n    const maxSize = 5 * 1024 * 1024; // 5 MB\r\n    if (!validTypes.includes(file.type)) {\r\n      setError('Invalid file type. Please upload a PDF, JPEG, or PNG file.');\r\n      return;\r\n    }\r\n    if (file.size > maxSize) {\r\n      setError('File size exceeds the 5MB limit. Please upload a smaller file.');\r\n      return;\r\n    }\r\n\r\n    // Read file and set as uploaded document\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      setUploadedDocument(e.target.result);\r\n      setError(''); // Clear errors on successful upload\r\n      console.log('Document uploaded:', e.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('SessionPage rendered with sessionId:', sessionId);\r\n    console.log('Document URL:', documentUrl);\r\n  }, [sessionId, documentUrl]);\r\n\r\n  if (!sessionId) {\r\n    return <p style={{ color: 'red' }}>Error: Session ID is undefined. Unable to proceed.</p>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Session Page</h1>\r\n      {error && <div style={{ padding: '10px', backgroundColor: 'pink', color: 'red' }}>{error}</div>}\r\n      <input type=\"file\" onChange={handleDocumentUpload} />\r\n      <DocumentCanvas documentUrl={uploadedDocument || documentUrl} sessionId={sessionId} />\r\n      <AudioChat sessionId={sessionId} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SessionPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}